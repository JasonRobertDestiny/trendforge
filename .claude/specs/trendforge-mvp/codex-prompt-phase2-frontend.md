# TrendForge Frontend Website - Development Prompt for Codex

## Project Context

You are building the frontend website for TrendForge, a static Next.js site that displays Deep Research articles generated by the backend pipeline. This is Phase 2 of the MVP development.

**Purpose**: Create a clean, fast, mobile-responsive website where internal operations team can browse and use the generated content as materials.

## Core Requirements

1. **Static Site Generation** - No backend needed, reads Markdown files from `/content/blog/`
2. **Fast Loading** - Target < 2 seconds load time
3. **Mobile Responsive** - Works on desktop, tablet, and phone
4. **Search & Filter** - Find articles by keywords, date, category
5. **Zero Database** - All data from Markdown files

## Tech Stack

```
Frontend Framework: Next.js 14 (App Router)
UI Library: React 18
Styling: Tailwind CSS 3
Markdown: MDX + remark/rehype
Deployment: Vercel (auto-deploy on git push)
Language: TypeScript
```

## Project Structure

Create the following structure:

```
trendforge/
├── frontend/
│   ├── app/
│   │   ├── layout.tsx           # Root layout with navigation
│   │   ├── page.tsx             # Homepage - article list
│   │   ├── blog/
│   │   │   └── [slug]/
│   │   │       └── page.tsx     # Individual article page
│   │   ├── search/
│   │   │   └── page.tsx         # Search results page
│   │   ├── globals.css          # Global styles
│   │   └── favicon.ico
│   ├── components/
│   │   ├── ArticleCard.tsx      # Article preview card
│   │   ├── Navigation.tsx       # Top navigation bar
│   │   ├── SearchBar.tsx        # Search input component
│   │   ├── FilterPanel.tsx      # Category/date filters
│   │   ├── Pagination.tsx       # Page navigation
│   │   └── Footer.tsx           # Site footer
│   ├── lib/
│   │   ├── markdown.ts          # Markdown parsing utilities
│   │   ├── articles.ts          # Article fetching/filtering
│   │   └── types.ts             # TypeScript types
│   ├── public/
│   │   └── logo.svg             # TrendForge logo
│   ├── package.json
│   ├── tsconfig.json
│   ├── next.config.js
│   ├── tailwind.config.js
│   ├── .env.local               # Environment variables
│   └── README.md
```

## Implementation Details

### 1. Package Dependencies (package.json)

```json
{
  "name": "trendforge-frontend",
  "version": "1.0.0",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "next": "^14.0.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "gray-matter": "^4.0.3",
    "remark": "^15.0.0",
    "remark-html": "^16.0.0",
    "rehype-highlight": "^7.0.0",
    "date-fns": "^3.0.0",
    "clsx": "^2.0.0",
    "lucide-react": "^0.300.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/react": "^18.2.0",
    "typescript": "^5.3.0",
    "tailwindcss": "^3.4.0",
    "autoprefixer": "^10.4.0",
    "postcss": "^8.4.0",
    "@tailwindcss/typography": "^0.5.10",
    "eslint": "^8.0.0",
    "eslint-config-next": "^14.0.0"
  }
}
```

### 2. TypeScript Types (lib/types.ts)

```typescript
export interface Article {
  slug: string
  title: string
  date: string
  time?: string
  source: 'hackernews' | 'reddit' | 'newsapi'
  source_url: string
  category: string
  tags: string[]
  excerpt: string
  content: string
  engagement_score: number
}

export interface ArticleMetadata {
  slug: string
  title: string
  date: string
  category: string
  tags: string[]
  excerpt: string
  source: string
}
```

### 3. Markdown Utilities (lib/markdown.ts)

```typescript
import fs from 'fs'
import path from 'path'
import matter from 'gray-matter'
import { remark } from 'remark'
import html from 'remark-html'
import { Article, ArticleMetadata } from './types'

const articlesDirectory = path.join(process.cwd(), '../content/blog')

export async function getArticleBySlug(slug: string): Promise<Article | null> {
  try {
    const fullPath = path.join(articlesDirectory, `${slug}.md`)
    const fileContents = fs.readFileSync(fullPath, 'utf8')

    // Parse frontmatter
    const { data, content } = matter(fileContents)

    // Convert markdown to HTML
    const processedContent = await remark()
      .use(html)
      .process(content)

    return {
      slug,
      content: processedContent.toString(),
      title: data.title,
      date: data.date,
      time: data.time,
      source: data.source,
      source_url: data.source_url,
      category: data.category || '科技',
      tags: data.tags || [],
      excerpt: data.excerpt,
      engagement_score: data.engagement_score || 0
    }
  } catch {
    return null
  }
}

export async function getAllArticles(): Promise<ArticleMetadata[]> {
  // Get all markdown files
  const fileNames = fs.readdirSync(articlesDirectory)

  const articles = fileNames
    .filter(fileName => fileName.endsWith('.md'))
    .map(fileName => {
      const slug = fileName.replace(/\.md$/, '')
      const fullPath = path.join(articlesDirectory, fileName)
      const fileContents = fs.readFileSync(fullPath, 'utf8')
      const { data } = matter(fileContents)

      return {
        slug,
        title: data.title,
        date: data.date,
        category: data.category || '科技',
        tags: data.tags || [],
        excerpt: data.excerpt,
        source: data.source
      }
    })

  // Sort by date (newest first)
  return articles.sort((a, b) => {
    return new Date(b.date).getTime() - new Date(a.date).getTime()
  })
}

export async function searchArticles(query: string): Promise<ArticleMetadata[]> {
  const articles = await getAllArticles()

  const queryLower = query.toLowerCase()

  return articles.filter(article => {
    return (
      article.title.toLowerCase().includes(queryLower) ||
      article.excerpt.toLowerCase().includes(queryLower) ||
      article.tags.some(tag => tag.toLowerCase().includes(queryLower))
    )
  })
}

export async function getArticlesByCategory(category: string): Promise<ArticleMetadata[]> {
  const articles = await getAllArticles()
  return articles.filter(article => article.category === category)
}
```

### 4. Homepage Component (app/page.tsx)

```tsx
import { getAllArticles } from '@/lib/markdown'
import ArticleCard from '@/components/ArticleCard'
import FilterPanel from '@/components/FilterPanel'
import { Suspense } from 'react'

export default async function HomePage() {
  const articles = await getAllArticles()

  // Get recent articles (last 7 days)
  const recentArticles = articles.slice(0, 12)

  // Get categories for filter
  const categories = Array.from(new Set(articles.map(a => a.category)))

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Hero Section */}
      <section className="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-16">
        <div className="container mx-auto px-4">
          <h1 className="text-4xl md:text-5xl font-bold mb-4">
            TrendForge 素材库
          </h1>
          <p className="text-xl opacity-90">
            每日自动更新的深度科技分析文章
          </p>
          <div className="mt-4 text-sm opacity-75">
            最后更新：{new Date().toLocaleDateString('zh-CN')}
          </div>
        </div>
      </section>

      {/* Main Content */}
      <div className="container mx-auto px-4 py-8">
        <div className="flex flex-col lg:flex-row gap-8">
          {/* Sidebar Filters */}
          <aside className="lg:w-64">
            <Suspense fallback={<div>Loading filters...</div>}>
              <FilterPanel categories={categories} />
            </Suspense>
          </aside>

          {/* Article Grid */}
          <main className="flex-1">
            <div className="mb-6">
              <h2 className="text-2xl font-semibold text-gray-800">
                最新文章
              </h2>
              <p className="text-gray-600 mt-1">
                共 {articles.length} 篇文章
              </p>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
              {recentArticles.map(article => (
                <ArticleCard key={article.slug} article={article} />
              ))}
            </div>

            {articles.length > 12 && (
              <div className="mt-8 text-center">
                <button className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                  加载更多
                </button>
              </div>
            )}
          </main>
        </div>
      </div>
    </div>
  )
}
```

### 5. Article Card Component (components/ArticleCard.tsx)

```tsx
import Link from 'next/link'
import { ArticleMetadata } from '@/lib/types'
import { Calendar, Tag, TrendingUp } from 'lucide-react'

interface ArticleCardProps {
  article: ArticleMetadata
}

export default function ArticleCard({ article }: ArticleCardProps) {
  const sourceColors = {
    hackernews: 'bg-orange-100 text-orange-800',
    reddit: 'bg-blue-100 text-blue-800',
    newsapi: 'bg-green-100 text-green-800'
  }

  return (
    <article className="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6">
      <Link href={`/blog/${article.slug}`}>
        {/* Source Badge */}
        <div className="flex items-center justify-between mb-3">
          <span className={`text-xs px-2 py-1 rounded-full ${sourceColors[article.source] || 'bg-gray-100'}`}>
            {article.source}
          </span>
          <span className="text-xs text-gray-500 flex items-center gap-1">
            <Calendar size={12} />
            {new Date(article.date).toLocaleDateString('zh-CN')}
          </span>
        </div>

        {/* Title */}
        <h3 className="text-lg font-semibold text-gray-900 mb-2 line-clamp-2 hover:text-blue-600 transition">
          {article.title}
        </h3>

        {/* Excerpt */}
        <p className="text-sm text-gray-600 mb-4 line-clamp-3">
          {article.excerpt}
        </p>

        {/* Tags */}
        <div className="flex flex-wrap gap-2 mb-4">
          {article.tags.slice(0, 3).map(tag => (
            <span key={tag} className="text-xs px-2 py-1 bg-gray-100 rounded">
              {tag}
            </span>
          ))}
        </div>

        {/* Footer */}
        <div className="flex items-center justify-between text-sm">
          <span className="text-gray-500 flex items-center gap-1">
            <Tag size={14} />
            {article.category}
          </span>
          <span className="text-blue-600 hover:text-blue-700">
            阅读全文 →
          </span>
        </div>
      </Link>
    </article>
  )
}
```

### 6. Article Detail Page (app/blog/[slug]/page.tsx)

```tsx
import { getArticleBySlug, getAllArticles } from '@/lib/markdown'
import { notFound } from 'next/navigation'
import Link from 'next/link'
import { Calendar, Clock, ExternalLink, Tag, TrendingUp } from 'lucide-react'

export async function generateStaticParams() {
  const articles = await getAllArticles()
  return articles.map(article => ({
    slug: article.slug
  }))
}

export default async function ArticlePage({
  params
}: {
  params: { slug: string }
}) {
  const article = await getArticleBySlug(params.slug)

  if (!article) {
    notFound()
  }

  return (
    <div className="min-h-screen bg-white">
      {/* Article Header */}
      <header className="bg-gradient-to-b from-gray-50 to-white border-b">
        <div className="container mx-auto px-4 py-8">
          {/* Breadcrumb */}
          <nav className="text-sm mb-4">
            <Link href="/" className="text-gray-500 hover:text-gray-700">
              首页
            </Link>
            <span className="mx-2 text-gray-400">/</span>
            <span className="text-gray-900">{article.category}</span>
          </nav>

          {/* Title */}
          <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            {article.title}
          </h1>

          {/* Meta Information */}
          <div className="flex flex-wrap items-center gap-4 text-sm text-gray-600">
            <span className="flex items-center gap-1">
              <Calendar size={16} />
              {new Date(article.date).toLocaleDateString('zh-CN')}
            </span>
            {article.time && (
              <span className="flex items-center gap-1">
                <Clock size={16} />
                {article.time}
              </span>
            )}
            <span className="flex items-center gap-1">
              <TrendingUp size={16} />
              热度分数: {article.engagement_score}
            </span>
            <a
              href={article.source_url}
              target="_blank"
              rel="noopener noreferrer"
              className="flex items-center gap-1 text-blue-600 hover:text-blue-700"
            >
              <ExternalLink size={16} />
              查看原文
            </a>
          </div>

          {/* Tags */}
          <div className="flex flex-wrap gap-2 mt-4">
            {article.tags.map(tag => (
              <span
                key={tag}
                className="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"
              >
                {tag}
              </span>
            ))}
          </div>
        </div>
      </header>

      {/* Article Content */}
      <article className="container mx-auto px-4 py-8">
        <div className="max-w-4xl mx-auto">
          <div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-8">
            <p className="text-sm text-blue-800">
              <strong>摘要：</strong>{article.excerpt}
            </p>
          </div>

          <div
            className="prose prose-lg max-w-none"
            dangerouslySetInnerHTML={{ __html: article.content }}
          />

          {/* Article Footer */}
          <footer className="mt-12 pt-8 border-t">
            <div className="flex justify-between items-center">
              <div>
                <p className="text-sm text-gray-600">
                  来源：{article.source} |
                  分类：{article.category}
                </p>
              </div>
              <Link
                href="/"
                className="px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition"
              >
                ← 返回列表
              </Link>
            </div>
          </footer>
        </div>
      </article>
    </div>
  )
}
```

### 7. Search Bar Component (components/SearchBar.tsx)

```tsx
'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'
import { Search } from 'lucide-react'

export default function SearchBar() {
  const [query, setQuery] = useState('')
  const router = useRouter()

  const handleSearch = (e: React.FormEvent) => {
    e.preventDefault()
    if (query.trim()) {
      router.push(`/search?q=${encodeURIComponent(query)}`)
    }
  }

  return (
    <form onSubmit={handleSearch} className="relative">
      <input
        type="text"
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="搜索文章..."
        className="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"
      />
      <Search className="absolute left-3 top-2.5 text-gray-400" size={20} />
      <button
        type="submit"
        className="absolute right-2 top-1.5 px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
      >
        搜索
      </button>
    </form>
  )
}
```

### 8. Navigation Component (components/Navigation.tsx)

```tsx
import Link from 'next/link'
import SearchBar from './SearchBar'

export default function Navigation() {
  return (
    <nav className="bg-white shadow-sm border-b sticky top-0 z-50">
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between h-16">
          {/* Logo */}
          <Link href="/" className="flex items-center space-x-2">
            <div className="w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg"></div>
            <span className="text-xl font-bold text-gray-900">TrendForge</span>
          </Link>

          {/* Search */}
          <div className="flex-1 max-w-xl mx-8">
            <SearchBar />
          </div>

          {/* Stats */}
          <div className="text-sm text-gray-600">
            今日更新：<span className="font-semibold text-gray-900">10篇</span>
          </div>
        </div>
      </div>
    </nav>
  )
}
```

### 9. Root Layout (app/layout.tsx)

```tsx
import type { Metadata } from 'next'
import { Inter } from 'next/font/google'
import Navigation from '@/components/Navigation'
import Footer from '@/components/Footer'
import './globals.css'

const inter = Inter({ subsets: ['latin'] })

export const metadata: Metadata = {
  title: 'TrendForge - AI驱动的内容素材库',
  description: '每日自动更新的深度科技分析文章',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="zh-CN">
      <body className={inter.className}>
        <Navigation />
        {children}
        <Footer />
      </body>
    </html>
  )
}
```

### 10. Tailwind Configuration (tailwind.config.js)

```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      typography: (theme) => ({
        DEFAULT: {
          css: {
            maxWidth: 'none',
            color: theme('colors.gray.700'),
            h1: {
              color: theme('colors.gray.900'),
            },
            h2: {
              color: theme('colors.gray.900'),
            },
            h3: {
              color: theme('colors.gray.900'),
            },
            strong: {
              color: theme('colors.gray.900'),
            },
            a: {
              color: theme('colors.blue.600'),
              '&:hover': {
                color: theme('colors.blue.700'),
              },
            },
          },
        },
      }),
    },
  },
  plugins: [
    require('@tailwindcss/typography'),
  ],
}
```

### 11. Next.js Configuration (next.config.js)

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  // Static export for deployment
  output: 'export',

  // Base path if deployed to subdirectory
  // basePath: '/trendforge',

  // Optimize images
  images: {
    unoptimized: true, // For static export
  },

  // Environment variables
  env: {
    SITE_NAME: 'TrendForge',
    SITE_URL: process.env.SITE_URL || 'https://trendforge.example.com',
  },

  // Custom webpack config if needed
  webpack: (config) => {
    // Handle markdown files
    config.module.rules.push({
      test: /\.md$/,
      use: 'raw-loader',
    })
    return config
  },
}

module.exports = nextConfig
```

### 12. Deployment Script (deploy.sh)

```bash
#!/bin/bash

echo "Building TrendForge Frontend..."

# Navigate to frontend directory
cd frontend

# Install dependencies
npm install

# Build static site
npm run build

# The 'out' directory contains the static site
echo "Build complete! Static site generated in 'frontend/out'"

# If using Vercel
echo "To deploy to Vercel:"
echo "1. Push to Git repository"
echo "2. Vercel will auto-deploy"

# If manual deployment
echo ""
echo "To deploy manually:"
echo "1. Upload contents of 'frontend/out' to your web server"
echo "2. Configure web server to serve index.html for all routes"
```

## Development Instructions

### 1. Setup

```bash
# Navigate to frontend directory
cd frontend

# Install dependencies
npm install

# Create environment file
cp .env.example .env.local

# Start development server
npm run dev
```

### 2. Development Workflow

1. **Ensure content exists**: Backend should have generated articles in `/content/blog/`
2. **Start dev server**: `npm run dev`
3. **View site**: Open http://localhost:3000
4. **Make changes**: Edit components, hot reload will update

### 3. Build for Production

```bash
# Build static site
npm run build

# Test production build locally
npm run start
```

### 4. Vercel Deployment

1. Connect repository to Vercel
2. Set build command: `cd frontend && npm run build`
3. Set output directory: `frontend/out`
4. Enable auto-deploy on push to main branch

## Features Checklist

- [ ] Homepage with article grid
- [ ] Individual article pages
- [ ] Search functionality
- [ ] Category filtering
- [ ] Date filtering
- [ ] Mobile responsive design
- [ ] Fast page loads (< 2s)
- [ ] SEO optimization
- [ ] RSS feed generation
- [ ] Social sharing buttons

## Performance Optimization

1. **Static Generation**: All pages pre-rendered at build time
2. **Image Optimization**: Use Next.js Image component
3. **Code Splitting**: Automatic with Next.js
4. **Caching**: Leverage browser and CDN caching
5. **Minification**: Automatic in production build

## Success Metrics

- [ ] Lighthouse Score > 90
- [ ] Page Load Time < 2 seconds
- [ ] Mobile Responsive
- [ ] Search works correctly
- [ ] All articles accessible
- [ ] No broken links
- [ ] Proper SEO meta tags